; Print a character 'A' to boot screen
; Compile: nasm -f bin char-boot.asm -o char-boot.bin
; Boot with QEMU: qemu-system-x86_64 -fda char-boot.bin
[BITS 16] ; tell NASM this source file is 16-bit code
[ORG 0x7C00] ; tell NASM the starting address

start:
    jmp 0:reset_segment_registers

reset_segment_registers:
    cli ; disable interrupt when reseting registers
    mov ax, 0x0000
    ; set all segment registers to 0
    mov ds, ax
    mov es, ax
    mov ss, ax
    mov fs, ax
    mov es, ax
    mov sp, 0x7c00 ; set up stack starts at 0x7c00

    sti ; re-enable interrupt

print_char:
    mov ah, 0eh ; 0x0e - write Character in TTY Mode
    mov al, 41h ; output character
    mov bx, 0 ; set page number and foreground color to 0
    int 10h ; run BIOS interrupt 0x10 - Video Services

halt:
    cli ; clear interrupt flag
    hlt ; halt execution

times 510 - ($-$$) db 0 ; fill the remaind 510 bytes with zeros
;dw 0xaa55 ; boot signature
db 055h
db 0AAh

; hexdump -v char-boot.bin
; 0000000 0eb4 41b0 00bb cd00 fa10 00f4 0000 0000
; 0000010 0000 0000 0000 0000 0000 0000 0000 0000
; 0000020 0000 0000 0000 0000 0000 0000 0000 0000
; 0000030 0000 0000 0000 0000 0000 0000 0000 0000
; 0000040 0000 0000 0000 0000 0000 0000 0000 0000
; 0000050 0000 0000 0000 0000 0000 0000 0000 0000
; 0000060 0000 0000 0000 0000 0000 0000 0000 0000
; 0000070 0000 0000 0000 0000 0000 0000 0000 0000
; 0000080 0000 0000 0000 0000 0000 0000 0000 0000
; 0000090 0000 0000 0000 0000 0000 0000 0000 0000
; 00000a0 0000 0000 0000 0000 0000 0000 0000 0000
; 00000b0 0000 0000 0000 0000 0000 0000 0000 0000
; 00000c0 0000 0000 0000 0000 0000 0000 0000 0000
; 00000d0 0000 0000 0000 0000 0000 0000 0000 0000
; 00000e0 0000 0000 0000 0000 0000 0000 0000 0000
; 00000f0 0000 0000 0000 0000 0000 0000 0000 0000
; 0000100 0000 0000 0000 0000 0000 0000 0000 0000
; 0000110 0000 0000 0000 0000 0000 0000 0000 0000
; 0000120 0000 0000 0000 0000 0000 0000 0000 0000
; 0000130 0000 0000 0000 0000 0000 0000 0000 0000
; 0000140 0000 0000 0000 0000 0000 0000 0000 0000
; 0000150 0000 0000 0000 0000 0000 0000 0000 0000
; 0000160 0000 0000 0000 0000 0000 0000 0000 0000
; 0000170 0000 0000 0000 0000 0000 0000 0000 0000
; 0000180 0000 0000 0000 0000 0000 0000 0000 0000
; 0000190 0000 0000 0000 0000 0000 0000 0000 0000
; 00001a0 0000 0000 0000 0000 0000 0000 0000 0000
; 00001b0 0000 0000 0000 0000 0000 0000 0000 0000
; 00001c0 0000 0000 0000 0000 0000 0000 0000 0000
; 00001d0 0000 0000 0000 0000 0000 0000 0000 0000
; 00001e0 0000 0000 0000 0000 0000 0000 0000 0000
; 00001f0 0000 0000 0000 0000 0000 0000 0000 aa55
; 0000200